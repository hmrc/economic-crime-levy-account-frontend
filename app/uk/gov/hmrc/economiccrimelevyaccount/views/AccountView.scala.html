@*
 * Copyright 2023 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import java.time.LocalDate
@import uk.gov.hmrc.economiccrimelevyaccount.views.ViewUtils


@this(
        layout: templates.Layout,
        summaryList: GovukSummaryList,
        button: GovukButton
)

@(eclRegistrationReference: String, eclRegistrationDate: String, obligationDetails: Option[ObligationDetails])(implicit request: Request[_], messages: Messages)

@layout(
    pageTitle = title(messages("account.title")),
    showBackLink = false,
    fullWidthContent = true
) {

    <h1 class="govuk-heading-xl govuk-!-margin-bottom-0">@messages("account.heading")</h1>
    <span class="govuk-caption-m">@messages("account.eclReferenceNumber", eclRegistrationReference)</span>
    <p>


        <br>

    <div class="flex-container govuk-grid-row">
    <!-- RETURNS CARD -->
        <div class="card" id="aft-overdue-charges">
            <div class="card-body">
                <h2 class="card-heading govuk-heading-m">
                    @messages("account.return.card.title")
                </h2>
                <p class="card-sub-heading bold govuk-body-m">
                    @if(obligationDetails.nonEmpty && obligationDetails.get.status == Open){
                        @defining(obligationDetails.get) { details =>
                            @if(details.inboundCorrespondenceDueDate.isBefore(LocalDate.now())){
                                    <!-- Overdue -->
                            <span class="font-xsmall">@messages("account.overdue.return.subHeading",
                                ViewUtils.formatLocalDate(details.inboundCorrespondenceFromDate),
                                ViewUtils.formatLocalDate(details.inboundCorrespondenceToDate))</span>
                                } else {
                                    <!-- Due -->
                            <span class="font-xsmall">@messages("account.due.return.subHeading",
                                ViewUtils.formatLocalDate(details.inboundCorrespondenceFromDate),
                                ViewUtils.formatLocalDate(details.inboundCorrespondenceToDate),
                                ViewUtils.formatLocalDate(details.inboundCorrespondenceDueDate))</span>
                            }
                        }
                    }
            <p class="card-sub-heading bold govuk-body-m">
                <span class="font-xsmall"></span>
                <p class="card-sub-heading bold govuk-body-m">
                    <span class="font-xsmall"></span>
                </p>
            </div>
            <div class="card-action">
                <ul class="govuk-list">
                    <li>
                        <a id="view-your-financial-overview" class="govuk-link" href="tbc">@messages("account.submitEcl")</a>
                    </li>
                    <li>
                        <a id="past-payments-and-charges" class="govuk-link" href="tbc">@messages("account.howToComplete")</a>
                    </li>
                    <li>
                        <a id="past-payments-and-charges" class="govuk-link" href="view-or-amend-returns">@messages("account.viewReturns")</a>
                    </li>
                </ul>
            </div>
        </div>

        <div class="card" id="aft-overview">
            <!-- PAYMENTS CARD -->
            <div class="card-body">
                <h2 class="card-heading govuk-heading-m">
                    @messages("account.payments.card.title")
                </h2>
                <p class="card-sub-heading bold govuk-body-m">
                    <span class="font-xsmall">@messages("account.payments.subHeading")</span></p>
                <p class="card-sub-heading bold govuk-body-m">
                    <span class="font-xsmall"></span>
                </p>
            </div>
            <div class="card-action">
                <ul class="govuk-list">
                    <li>
                        <a id="aftContinueInProgressLink" class="govuk-link" href="tbc">@messages("account.payments.makePayment")</a>
                    </li>
                    <li>
                        <a id="aftLoginLink" class="govuk-link" href="tbc">@messages("account.payments.setDirectDebit")</a>
                    </li>
                    <li>
                        <a id="aftAmendLink" class="govuk-link" href="tbc">@messages("account.payments.viewHistory")</a>
                    </li>
                </ul>
            </div>
        </div>


        <div class="card" id="event-reporting">
            <!-- HISTORY CARD -->
            <div class="card-body">
                <h2 class="card-heading govuk-heading-m">
                    @messages("account.history.card.title")
                </h2>
            </div>
            <div class="card-action">
                <ul class="govuk-list">
                    <li>
                        <a id="aftContinueInProgressLink" class="govuk-link" href="tbc">@messages("account.history.viewHistory")</a>
                    </li>
                    <li>
                        <a id="aftLoginLink" class="govuk-link" href="tbc">@messages("account.history.viewReturns")</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
}
